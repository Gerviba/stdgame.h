.TH "md_docs_fileformats" 3 "Tue Dec 5 2017" "stdgame" \" -*- nroff -*-
.ad l
.nh
.SH NAME
md_docs_fileformats \- File formats 

.SS "Assets folder"
.PP
.IP "\(bu" 2
maps
.IP "  \(bu" 4
\fBMap\fP (\&.map)
.IP "  \(bu" 4
\fBMenu\fP (\&.menu)
.PP

.IP "\(bu" 2
objects
.IP "  \(bu" 4
\fBStaticObject\fP: Pre-calculated move matrix (\&.sobj)
.IP "  \(bu" 4
\fBDynamicObject\fP: Dynamic move matrix (\&.dobj)
.IP "  \(bu" 4
\fBActiveObject\fP: Multiple DynamicObjects (\&.aobj)
.PP

.IP "\(bu" 2
fonts
.IP "  \(bu" 4
\fBChar\fP: Character file (\&.char)
.IP "  \(bu" 4
\fBFont\fP file (\&.font)
.PP

.IP "\(bu" 2
shaders
.IP "  \(bu" 4
GLSL vertex and fragment shader (v1\&.5)
.PP

.IP "\(bu" 2
textures
.IP "  \(bu" 4
Mostly png files (\&.png)
.PP

.PP
.PP
.SS "\fBMap\fP and \fBMenu\fP"
.PP
.IP "\(bu" 2
Use # for comments
.IP "\(bu" 2
Max line length: 255 char
.IP "\(bu" 2
Strict orders: X->Y->T, O->I->(E, B)
.IP "\(bu" 2
Whitespace start chars are not allowed
.PP
.PP
Sign  Type  Format   $  Meta  $ KEY VALUE\&.\&.\&.   X  \fBTexture\fP  X id filename (1)   Y  \fBTextureBlock\fP  Y id base top right bottom left (1)   T  \fBTile\fP  T x y Y\&.id TileType (1)   S  Static \fBLight\fP  S id x y z strength rrggbb specular intensity reference visible (2)   L  Ligthing  L x y strength1 color1 strength2 color2 time (4)   O  Object Active  O id STATIC/DYNAMIC/ACTIVE filename   I  Object Instance  I id O\&.id STATIC/DYNAMIC/ACTIVE x y z alpha beta gamma SizeX SizeY SizeZ visible reference (2)   C  Coords  C id type x y   M  \fBMessage\fP  M x y z rrggbb alpha FontSize message   R  \fBRegion\fP  R xMin yMin xMax yMax \fBAction\&.id\fP maxUse itemRequired noSneek (5) (6)   A  \fBTextComponent\fP  A id x y z relativeX relativeY align message rrggbb alpha fontsize action (3)   B  \fBObjectComponent\fP  A id x y z relativeX relativeY alignX I(ACTIVE)\&.id action (3)   D  \fBImageComponent\fP  D id path x y z height width action (3)   N  \fBAction\fP  N id ActionType value (7)   P  \fBPhysicsArea\fP  P id x y enable   E  \fBEntity\fP  E id aobjI\&.id ligth\&.id spellSpeed damage hp score floatFi0 hitboxRadius   
.PP
.IP "\(bu" 2
(1) \fBTexture\fP, \fBTextureBlock\fP and \fBTile\fP lines are only processed in maps and the first loaded menu file\&.
.IP "\(bu" 2
(2) Reference: required and available only for dynamic objects\&.
.IP "\(bu" 2
Meta:
.IP "  \(bu" 4
\fCNAME\fP name
.IP "  \(bu" 4
\fCAUTHOR\fP name
.IP "  \(bu" 4
\fCDESCRIPTION\fP String (Use _ for space)
.IP "  \(bu" 4
\fCAMBIENT\fP percent (0\&.0 - 1\&.0)
.IP "  \(bu" 4
\fCSPAWN\fP x y z
.IP "  \(bu" 4
\fCSTATE\fP GameState (0: MENU/ 1: INGAME/ 2: PAUSE) *(optional, default: 0)*
.IP "  \(bu" 4
\fCCURSOR\fP true/false *(optional, default: false)*
.IP "  \(bu" 4
\fCSCROLL\fP true/false min max *(optional, default: false, 0, 0)*
.PP

.IP "\(bu" 2
(3) \fBComponent\fP action types:
.PP
.PP
\fBAction\fP  Effect   0  (Nothing)   1  Open map selector   2  Open options   21  Set graphics setting   22  Set controls setting   3  Open credits   31  Open GitHub   4  Open main menu   5  Start game   -1  Quit game   
.PP
.IP "\(bu" 2
(4) Unimplemented
.IP "\(bu" 2
(5) Maximum use: n > 0 for n, -1 for infinity
.IP "\(bu" 2
(6) Item reuired: item id or -1 for noting
.IP "\(bu" 2
(7) \fBAction\fP lose id: -10000
.IP "\(bu" 2
RelativeX, RelativeY and Align enums:
.PP
.PP
Enum  Name  Value  Description   RelativeX  X_LEFT  -1  Relative to the left horizontal side of the screen   RelativeX  X_CENTER  0  Relative to the horizontal center of the screen   RelativeX  X_RIGHT  1  Relative to the right horizontal side of the screen   RelativeY  Y_TOP  -1  Relative to the top vertical side of the screen   RelativeY  Y_CENTER  0  Relative to the vertical center of the screen   RelativeY  Y_BOTTOM  1  Relative to the right vertical side of the screen   Align  ALIGN_LEFT  -1  The anchor point will be placed to the left side of the text   Align  ALIGN_CENTER  0  The anchor point will be placed to the center of the text   Align  ALIGN_RIGHT  1  The anchor point will be placed to the right side of the text   
.PP
.IP "\(bu" 2
Reference points:
.PP
.PP
Id  Name   0  (Nothing)   1  Floating item   2  Left hand   3  Coin floating   4  Left weapon light   5  Right hand   6  Top spikes   7  \fBPlayer\fP center   8  \fBEntity\fP floating   
.PP
.IP "\(bu" 2
ActionType values: (-65536 = don't set)
.PP
.PP
ActionType  Id  Arguments   TELEPORT  0  x y   DAMAGE  1  count   ADD_SCORE  2  count   SET_DOBJ  3  dobj\&.id x y z alpha beta gamma SizeX SizeY SizeZ visible reference   SET_AOBJ  4  aobj\&.id x y z alpha beta gamma SizeX SizeY SizeZ visible   SET_ITEM  5  itemId   SET_LIGHT  6  light\&.id x y z strength rrggbb specular intensity visible reference   OBJECT_PSX  7  id x y enabled   FINISH  8  Finish (Win)   LOSE  9  Lose   
.PP
.SS "\fBStaticObject\fP and \fBDynamicObject\fP"
.PP
Sign  Type  Format   $  Meta  $ KEY VALUE\&.\&.\&.   C  ColorPart  C id rrggbb alpha   B  ObjectPart  B x y z PartType C\&.id   
.PP
.IP "\(bu" 2
Meta:
.IP "  \(bu" 4
\fCPOSITION\fP x y z
.IP "  \(bu" 4
\fCROTATION\fP alpha beta gamma
.IP "  \(bu" 4
\fCSCALE\fP x y z
.PP

.IP "\(bu" 2
Instances:
.IP "  \(bu" 4
\fBStaticObject\fP -> \fBStaticObjectInstance\fP
.IP "  \(bu" 4
\fBDynamicObject\fP -> \fBDynamicObjectInstance\fP
.PP

.PP
.PP
.SS "\fBActiveObject\fP"
.PP
Sign  Type  Format   $  Meta  $ KEY VALUE\&.\&.\&.   C  ColorPart  C id rrggbb alpha   B  ObjectPart  B stateId x y z PartType C\&.id   
.PP
.IP "\(bu" 2
Meta:
.IP "  \(bu" 4
\fCPOSITION\fP x y z
.IP "  \(bu" 4
\fCROTATION\fP alpha beta gamma
.IP "  \(bu" 4
\fCSCALE\fP x y z
.IP "  \(bu" 4
\fCSIZE\fP stateCount (It must be under the POSITION, ROTATION and the SCALE meta line\&.)
.PP

.IP "\(bu" 2
Instance:
.IP "  \(bu" 4
\fBActiveObject\fP -> \fBActiveObjectInstance\fP
.PP

.IP "\(bu" 2
The first active object will be the player\&.
.PP
.PP
.SS "\fBChar\fP"
.PP
Sign  Type  Format   $  Meta  $ KEY VALUE\&.\&.\&.   B  ObjectPart  B x y z PartType C\&.id   
.PP
.IP "\(bu" 2
Meta:
.IP "  \(bu" 4
\fCWIDTH\fP width
.IP "  \(bu" 4
\fCY\fP deltaY
.PP

.PP
.PP
.RS 4
\fBColor\fP = 0 means default color 
.RE
.PP
.PP
.SS "\fBFont\fP v1 (\&.font)"
.PP
Format:
.PP
.PP
.nf
character filename
%c %s
.fi
.PP
.PP
.RS 4
NOTE: No comments enabled 
.RE
.PP
.PP
.SS "\fBFont\fP v2 (\&.font32)"
.PP
\fIUnimplemented\fP
.PP
Format:
.PP
.PP
.nf
characterId filename
%u %s
.fi
.PP
.PP
.SS "Vertex Shader"
.PP
Special arguments:
.PP
Argument name  Type  Description   ligthColor  uniform vec3 [28]  RGB color (0\&.0 - 1\&.0)   ligthInfo  uniform vec3 [28]  Specular 1:on/0:off, distFactor, lightIntensity   
.PP
.SS "Data folder"
.PP
.RS 4
The program won't be able to run without an existing \fCdata\fP folder\&. 
.RE
.PP
.PP
.SS "\fBOptions\fP (data/options\&.dat)"
.PP
.IP "\(bu" 2
Type: Binary file
.IP "\(bu" 2
Format: (default, -1\&.0 = nothing)
.IP "  \(bu" 4
version (1)
.IP "  \(bu" 4
msaa (16)
.IP "  \(bu" 4
fullscreen (true)
.IP "  \(bu" 4
windowedHeight (0 = auto)
.IP "  \(bu" 4
windowedWidth (0 = auto)
.IP "  \(bu" 4
cameraMovement (true)
.IP "  \(bu" 4
moveLeft (A, LEFT)
.IP "  \(bu" 4
moveRight (D, RIGHT)
.IP "  \(bu" 4
jump (SPACE, W, UP)
.IP "  \(bu" 4
sneek (SHIFT, S, DOWN)
.IP "  \(bu" 4
attack (MOSE_LEFT, CONTROL_LEFT, CONTROL_RIGHT)
.IP "  \(bu" 4
use (F)
.IP "  \(bu" 4
spell1 (F1, 1)
.IP "  \(bu" 4
spell2 (F2, 2)
.IP "  \(bu" 4
spell3 (F3, 3)
.IP "  \(bu" 4
menu (ESC, PAUSE)
.PP

.IP "\(bu" 2
See: \fBmenu\&.c\fP for more info
.PP
.PP
.SS "Records (data/records\&.dat)"
.PP
.IP "\(bu" 2
Type: Text file
.IP "\(bu" 2
Format per line:
.IP "  \(bu" 4
\fBMap\fP name
.IP "  \(bu" 4
Record type (0: time, 1: score)
.IP "  \(bu" 4
Record value (time: sec, score: count)
.PP

.IP "\(bu" 2
Separator: whitespace 
.PP

